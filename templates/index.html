<!DOCTYPE html>
<html>
<head>
    <title>OrderBot</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<style>
	
	#chat-container {
		
		position: fixed;
		bottom: 0px;
		right: 0px;
		width: 350px;
		height: 500px;
		border-radius: 10px;
		overflow: hidden;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
	  }
	  .chat-header {
		background-color: #C2185B;
		color: #fff;
		padding: 10px;
	  }
	p{
		margin:0px;
	}
	
	  .chat-body {
		height: 340px;
		overflow-y: scroll;
		padding: 10px;
		background-color: #f9f9f9;
	  }
	  .chat-footer {
	    background-color: #f9f9f9;
	    border: 1px solid #C2185B;
	    border-radius: 21px;
	    height: 38px;
	}
	.chat-footer:focus{
		box-shadow:-1px -8px 10px 1px rgb(235 38 38 / 20%), 0px -2px 20px 0 rgb(255 42 42 / 19%);
	}
	
	  .messageDiv{
		padding: 8px 8px 8px 0px;
		margin:12px 0px;
		
  }
	  .message{
		margin:15px 0px;
		border: none;
		padding: 10px;
		border-radius: 5px;
		box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
		font-size: 16px;
	  }
	  .inputField{
	    width: 80%;
	    margin: 0px 5px;
	    outline: none;
	    padding-left: 15px;
	    border: none;
	    background-color: transparent;
	}
	
    .btn{
      border: none;
      background: #C2185B;
      color: white;
      padding: 6px 15px;
      border-radius: 70px;
    }
	
	.chat-message {
	    margin: 15px 0px;
	    border: none;
	    padding: 10px 10px 10px 22px;
	    border-radius: 50px;
	    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
	    font-size: 16px;
	    width: 50%;
	    text-align: left;
	}
	.user-message{
	    background-color: #F48FB1;
	    margin: 0px 0 0 40%;
	    box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
	}
	
	#chat-form{
	  display:flex;
          height:38px;
	}
	
</style>

<body>
    <div id="chat-container">
		<div class="chat-header">
			<h1>Chat Bot</h1>
		</div>
		<div class="chat-body">
			<div id="chat-message system-message">
				<div class="message">Hello, how can I assist you?</div>
			</div
                </div> 
 </div>
      
	  <div class="chat-footer">
             <form id="chat-form">
                <input type="text" class="inputField" name="message" id="message-input" placeholder="Type your message here...">
                <inputclass="btn" type="submit" value="Send">
             </form>
	  </div> 
    
    
    <script>
      $(document).ready(function() {
        $('#chat-form').submit(function(event) {
          event.preventDefault();
          var message = $('#message-input').val();
          $('.chat-body').append('<div class="chat-message user-message"><p>' + message + '</p></div>');
          $('#message-input').val('');
          $.ajax({
            url: '/chat',
            type: 'POST',
            data: { message: message },
            dataType: 'json',
            success: function(response) {
              var botMessage = stringContainsSequences(response.response);
              $('.chat-body').append('<div class="chat-message bot-message"><span><img style="width:25px;height:25px;" src="https://e7.pngegg.com/pngimages/408/238/png-clipart-pink-and-blue-illustration-discord-computer-icons-logo-user-internet-bot-discord-icon-purple-angle-thumbnail.png"></span><p>' + botMessage + '</p></div>');
            }
          });
        });
      });
     function stringContainsSequences(str) {
	var sequences = ["fractal"];
	 var count =0;
	 for (var i = 0; i < sequences.length; i++) {
           if (str.toLowerCase().includes(sequences[i])) {
		   console.log('yes');
		return str;
	   }
           else {
		   console.log('No');
	       return "No Data Found";
	   }
	}
	 
	return str;
	}    
    </script>
  </body>
</html>  
